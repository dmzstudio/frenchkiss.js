/**
 * @license frenchkiss 0.1.0
 * Copyright (c) 2018-2019 Koala Interactive, Inc.
 * License: MIT
 */
"use strict";var t=/^\s*\w+\s*$/,e=/^\s*(\w+)\s*,\s*(select|plural)\s*,/i,n=JSON.stringify,r=function(t){return'(p["'+t+'"]||(p["'+t+'"]=="0"?0:"'+t+'" in p?"":v("'+t+'",k,l)))'};function u(t){for(var e={},u=function t(e,u){var o=[];var f=e.length;for(var i=0;i<f;++i){var s=e[i],l=s[0],a=s[1],c="";if(0===l&&a)c=n(a);else if(1===l)c=r(a.trim());else if(2===l){for(var p=s[2],v=s[3],h=s[4],g=v.length,y=0;y<g;++y)h?"="===v[y][0][0]?c+='p["'+p+'"]=='+n(v[y][0].substr(1)):(u[p]=1,c+='m["'+p+'"]=='+n(v[y][0])):c+='p["'+p+'"]=='+n(v[y][0]),c+="?"+t(v[y][1],u)+":";c="("+c+t(a,u)+")"}c&&o.push(c)}return o.join("+")||'""'}(o(t),e),f=Object.keys(e),i=f.length,s=[],l=0;l<i;++l)s[l]=f[l]+':f(p["'+f[l]+'"])';return Function("a","f","k","l","v","var p=a||{}"+(i?",m=f?{"+s+"}:{}":"")+";return "+u)}function o(n){for(var r=0,u="",o=n.length,i=[],s=0;s<o;++s){var l=n[s],a=void 0;"{"===l?r++||(a=[0,u]):"}"===l&&(--r||(a=t.test(u)?[1,u]:e.test(u)?f(u):[0,u])),a?(i.push(a),u=""):u+=l}return i.push([0,u]),i}function f(t){for(var n=t.match(e),r=n[1],u="p"===n[2][0].toLowerCase(),f=o(t.replace(e,"")),i=f.length,s=[],l=[0,""],a=0;a<i-1;){var c=f[a++][1].trim(),p=o(f[a++][1]);"other"===c?l=p:u&&"="===c[0]?s.unshift([c,p]):s.push([c,p])}return[2,l,r,s,u]}var i={},s={},l={},a="",c="",p=function(t){return t},v=function(){return""},h=function(t,e){return i[e]&&i[e][t]||g(t,e)},g=function(t,e){var n=s[e];if(n){if("string"==typeof n[t])n=n[t];else for(var r=t.split("."),o=r.length,f=0;f<o;++f){if(!n.hasOwnProperty(r[f]))return null;n=n[r[f]]}if("string"==typeof n)return i[e][t]=u(n)}return null},y=function t(e,n,r,u){for(var o=Object.keys(n),f=o.length,i=0;i<f;++i){var s=o[i],l=u?u+"."+s:s;if("object"==typeof n[s])"object"!=typeof e[s]&&(e[s]={}),t(e[s],n[s],r,l);else{if(delete r[l],"object"==typeof e[s])for(var a=l+".",c=a.length,p=Object.keys(r),v=p.length,h=0;h<v;++h){var g=p[h];g.substr(0,c)===a&&delete r[g]}e[s]=n[s]}}},b={cache:i,store:s,t:function(t,e,n){var r,u=n||a;return u&&(r=h(t,u))?r(e,l[u],t,u,v):(u=c)&&(r=h(t,u))?r(e,l[u],t,u,v):p(t)},onMissingKey:function(t){p=t},onMissingVariable:function(t){v=t},locale:function(t){return t&&(a=t),a},fallback:function(t){return t&&(c=t),c},set:function(t,e){i[t]={},s[t]=e},unset:function(t){delete i[t],delete s[t]},extend:function(t,e){s[t]||(s[t]={}),i[t]||(i[t]={}),y(s[t],e,i[t],"")},plural:function(t,e){l[t]=e}};module.exports=b;

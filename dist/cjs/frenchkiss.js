/**
 * @license frenchkiss 0.0.10
 * Copyright (c) 2018-2019 Koala Interactive, Inc.
 * License: MIT
 */
"use strict";var n=/^\s*\w+\s*$/,t=/^\s*(\w+)\s*,\s*(select|plural)\s*,/i,r=JSON.stringify,e=function(n){return'(p["'+n+'"]||(p["'+n+'"]=="0"?0:"'+n+'" in p?"":v("'+n+'",k,l)))'};function u(n){for(var t={},u=function n(t,u){var i=[];var o=t.length;for(var f=0;f<o;++f){var s=t[f],a=s[0],c=s[1],l="";if(0===a&&c)l=r(c);else if(1===a)l=e(c.trim());else if(2===a){for(var v=s[2],p=s[3],h=s[4],g=p.length,d=0;d<g;++d)h?"="===p[d][0][0]?l+='p["'+v+'"]=='+r(p[d][0].substr(1)):(u[v]=1,l+='m["'+v+'"]=='+r(p[d][0])):l+='p["'+v+'"]=='+r(p[d][0]),l+="?"+n(p[d][1],u)+":";l="("+l+n(c,u)+")"}l&&i.push(l)}return i.join("+")||'""'}(i(n),t),o=Object.keys(t),f=o.length,s=[],a=0;a<f;++a)s[a]=o[a]+':f(p["'+o[a]+'"])';return Function("a","f","k","l","v","var p=a||{}"+(f?",m=f?{"+s+"}:{}":"")+";return "+u)}function i(r){for(var e=0,u="",i=r.length,f=[],s=0;s<i;++s){var a=r[s],c=void 0;"{"===a?e++||(c=[0,u]):"}"===a&&(--e||(c=n.test(u)?[1,u]:t.test(u)?o(u):[0,u])),c?(f.push(c),u=""):u+=a}return f.push([0,u]),f}function o(n){for(var r=n.match(t),e=r[1],u="p"===r[2][0].toLowerCase(),o=i(n.replace(t,"")),f=o.length,s=[],a=[0,""],c=0;c<f-1;){var l=o[c++][1].trim(),v=i(o[c++][1]);"other"===l?a=v:u&&"="===l[0]?s.unshift([l,v]):s.push([l,v])}return[2,a,e,s,u]}var f={},s={},a={},c="",l="",v=function(n){return n},p=function(){return""},h=function(n,t){return f[t]&&f[t][n]||s[t]&&"string"==typeof s[t][n]&&(f[t][n]=u(s[t][n]))},g={cache:f,store:s,t:function(n,t,r){var e,u=r||c;return u&&(e=h(n,u))?e(t,a[u],n,u,p):(u=l)&&(e=h(n,u))?e(t,a[u],n,u,p):v(n)},onMissingKey:function(n){v=n},onMissingVariable:function(n){p=n},locale:function(n){return n&&(c=n),c},fallback:function(n){return n&&(l=n),l},set:function(n,t){f[n]={},s[n]=t},unset:function(n){delete f[n],delete s[n]},extend:function(n,t){s[n]||(s[n]={}),f[n]||(f[n]={});for(var r=Object.keys(t),e=r.length,u=0;u<e;++u){var i=r[u];s[n][i]=t[i],delete f[n][i]}},plural:function(n,t){a[n]=t}};module.exports=g;

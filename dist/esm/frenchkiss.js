/**
 * @license frenchkiss 0.1.0
 * Copyright (c) 2018-2019 Koala Interactive, Inc.
 * License: MIT
 */
const t=/^\s*\w+\s*$/,e=/^\s*(\w+)\s*,\s*(select|plural)\s*,/i,n=JSON.stringify,s=t=>'(p["'+t+'"]||(p["'+t+'"]=="0"?0:"'+t+'" in p?"":v("'+t+'",k,l)))';function l(t){const e={},l=function t(e,l){const o=[];const r=e.length;for(let c=0;c<r;++c){const r=e[c],f=r[0],i=r[1];let u="";if(0===f&&i)u=n(i);else if(1===f)u=s(i.trim());else if(2===f){const e=r[2],s=r[3],o=r[4],c=s.length;for(let r=0;r<c;++r)o?"="===s[r][0][0]?u+='p["'+e+'"]=='+n(s[r][0].substr(1)):(l[e]=1,u+='m["'+e+'"]=='+n(s[r][0])):u+='p["'+e+'"]=='+n(s[r][0]),u+="?"+t(s[r][1],l)+":";u="("+u+t(i,l)+")"}u&&o.push(u)}return o.join("+")||'""'}(o(t),e),r=Object.keys(e),c=r.length,f=[];for(let t=0;t<c;++t)f[t]=r[t]+':f(p["'+r[t]+'"])';return Function("a","f","k","l","v","var p=a||{}"+(c?",m=f?{"+f+"}:{}":"")+";return "+l)}function o(n){let s=0,l="";const o=n.length,c=[];for(let f=0;f<o;++f){const o=n[f];let i;"{"===o?s++||(i=[0,l]):"}"===o&&(--s||(i=t.test(l)?[1,l]:e.test(l)?r(l):[0,l])),i?(c.push(i),l=""):l+=o}return c.push([0,l]),c}function r(t){const n=t.match(e),s=n[1],l="p"===n[2][0].toLowerCase(),r=o(t.replace(e,"")),c=r.length,f=[];let i=[0,""];for(let t=0;t<c-1;){let e=r[t++][1].trim();const n=o(r[t++][1]);"other"===e?i=n:l&&"="===e[0]?f.unshift([e,n]):f.push([e,n])}return[2,i,s,f,l]}const c={},f={};let i={},u="",p="",h=t=>t,a=()=>"";const g=(t,e)=>c[e]&&c[e][t]||y(t,e),y=(t,e)=>{let n=f[e];if(n){if("string"==typeof n[t])n=n[t];else{const e=t.split("."),s=e.length;for(let t=0;t<s;++t){if(!n.hasOwnProperty(e[t]))return null;n=n[e[t]]}}if("string"==typeof n)return c[e][t]=l(n)}return null},b=(t,e,n)=>{let s,l=n||u;return l&&(s=g(t,l))?s(e,i[l],t,l,a):(l=p)&&(s=g(t,l))?s(e,i[l],t,l,a):h(t)},j=t=>{h=t},d=t=>{a=t},k=t=>(t&&(u=t),u),m=t=>(t&&(p=t),p),O=(t,e)=>{c[t]={},f[t]=e},w=(t,e)=>{i[t]=e},v=(t,e)=>{f[t]||(f[t]={}),c[t]||(c[t]={}),x(f[t],e,c[t],"")},x=(t,e,n,s)=>{const l=Object.keys(e),o=l.length;for(let r=0;r<o;++r){const o=l[r],c=s?s+"."+o:o;if("object"==typeof e[o])"object"!=typeof t[o]&&(t[o]={}),x(t[o],e[o],n,c);else{if(delete n[c],"object"==typeof t[o]){const t=c+".",e=t.length,s=Object.keys(n),l=s.length;for(let o=0;o<l;++o){const l=s[o];l.substr(0,e)===t&&delete n[l]}}t[o]=e[o]}}},M=t=>{delete c[t],delete f[t]};export default{cache:c,store:f,t:b,onMissingKey:j,onMissingVariable:d,locale:k,fallback:m,set:O,unset:M,extend:v,plural:w};export{c as cache,f as store,b as t,j as onMissingKey,d as onMissingVariable,k as locale,m as fallback,O as set,w as plural,v as extend,M as unset};
